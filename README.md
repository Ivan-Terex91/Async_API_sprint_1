# Запуск проекта
1. Конфигурация маппинга портов для локального запуска
`cp docker-compose.override.yml{.example,}`
2. Переменные окружения для запуска
`cp .env{.example,}`
3. Запуск контейнеров
`docker-compose up -d`

* В проекте находится тестовая бд, которая автоматически разворачивается в контейнере с postgres.
* Etl создаст нужные индексы в elastic и скопирует данные, после запуска elastic контейнера.
`docker-compose logs -f --tail 30 etl` для просмотра процесса синхронизации данных.


[PRACTIX-6 Добавить апи для жанров](https://github.com/smdnv/Async_API_sprint_1/issues/6)
1. Добавлены модели и сервис для жанров
2. Добавлены апи методы
    1. `/api/v1/genre` - список жанров
    2. `/api/v1/genre/<uuid:UUID>` - просмотр жанра

* Изначально в pr было сделано кеширование в сервисе жанров. Но потом мы решили убрать кеширование из сервиса https://github.com/smdnv/Async_API_sprint_1/issues/24, в пользу реализации общего решения для кеширования.

[PRACTIX-7 Добавить апи для персонажей](https://github.com/smdnv/Async_API_sprint_1/issues/7)
1. Добавлены модели и сервис для персонажей
2. Добавлены апи методы
    1. `/api/v1/person/<uuid:UUID>` - просмотр персонажа
    2. `/api/v1/person/<uuid:UUID>/film/` - просмотр списка фильмов персонажа

* Изначально в pr было сделано кеширование в сервисе персонажей. Но потом мы решили убрать кеширование из сервиса https://github.com/smdnv/Async_API_sprint_1/issues/24, в пользу реализации общего решения для кеширования.

[PRACTIX-8 Добавить апи для фильмов](https://github.com/smdnv/Async_API_sprint_1/issues/8)
1. Добавлены модели и сервис для фильмов
2. Добавлены апи методы
    1. `/api/v1/film` - список фильмов
    2. `/api/v1/film/<uuid:UUID>` - просмотр фильма

[PRACTIX-11 Добавить поиск по фильмам и персонажам](https://github.com/smdnv/Async_API_sprint_1/issues/11)
1. Добавлены апи методы поиска по фильмам и персонажам
    1. `/api/v1/person/search/`
    2. `/api/v1/film/search/`

[PRACTIX-12 Обновить docker образ и docker-compose](https://github.com/smdnv/Async_API_sprint_1/issues/12)
1. Добавлены сервисы
    1. api, etl
    2. elastic, postgres, redis
    3. nginx

[https://github.com/smdnv/Async_API_sprint_1/issues/24](https://github.com/smdnv/Async_API_sprint_1/issues/24)
1. Убрано кеширование в сервисах жанров и персонажей. Кеширование будет реализовано в отдельной задаче. Сейчас этот код только мешает.

[PRACTIX-10 Расширить etl для жанров и персонажей](https://github.com/smdnv/Async_API_sprint_1/issues/10)
1. Доработан etl скрипт для синхронизации данных жанров и персонажей
2. Структура etl
    1. `storage.py` - интерфейсы к pg, es и класс для хранения состояния синхронизации =
    2. `repo.py` - классы репозиториев для фильмов, жанров, персонажей. Вся работа с pg, es идет через данные классы.
    3. `models.py` - dataclasss модели для фильмов, жанров, персонажей.
    4. `queries.py` - шаблоны запросов к pg.
    5. `main.py` - Основная часть etl. Инициализирует интерфейсы к хранилищам и репозитории. Содержит отдельные классы для описания etl для фильмов, жанров и персонажей.


[PRACTIX-13 Добавить кеширование ответов через redis](https://github.com/smdnv/Async_API_sprint_1/issues/10)
1. Реализовано кеширование на уровне fastapi middleware.



# Техническое задание

Предлагается выполнить проект «Асинхронное API». Этот сервис будет точкой входа для всех клиентов. В первой итерации в сервисе будут только анонимные пользователи. Функции авторизации и аутентификации запланированы в модуле «Auth».

## Используемые технологии

- Код приложения пишется на **Python + FastAPI**.
- Приложение запускается под управлением сервера **ASGI**(uvicorn).
- Хранилище – **ElasticSearch**.
- За кеширование данных отвечает – **redis cluster**.
- Все компоненты системы запускаются через **docker**.

## Описание
В папке tasks ваша команда сможет найти задачи, которые необходимо выполнить в первом спринте второго модуля. Обратите внимание на задачи 00_create_repo и 01_create_basis – они являются блокирующими для командной работы, их необходимо выполнить как можно раньше.

Мы оценили задачи в story point'ах, значения которых брались из [последовательности Фибоначчи](https://ru.wikipedia.org/wiki/Числа_Фибоначчи) (1,2,3,5,8,…).
Вы можете разбить имеющиеся задачи на более маленькие – например, чтобы распределять между участниками команды не большие куски задания, а маленькие подзадачи. В таком случае не забудьте зафиксировать изменения в issues в репозитории.

**От каждого разработчика ожидается выполнение минимум 40% от общего числа story points в спринте.**



# Техническое задание

Предлагается выполнить проект «Асинхронное API». Этот сервис будет точкой входа для всех клиентов. В первой итерации в сервисе будут только анонимные пользователи. Функции авторизации и аутентификации запланированы в модуле «Auth».

## Используемые технологии

- Код приложения пишется на **Python + FastAPI**.
- Приложение запускается под управлением сервера **ASGI**(uvicorn).
- Хранилище – **ElasticSearch**.
- За кеширование данных отвечает – **redis cluster**.
- Все компоненты системы запускаются через **docker**.

## Описание
В папке tasks ваша команда сможет найти задачи, которые необходимо выполнить в первом спринте второго модуля. Обратите внимание на задачи 00_create_repo и 01_create_basis – они являются блокирующими для командной работы, их необходимо выполнить как можно раньше.

Мы оценили задачи в story point'ах, значения которых брались из [последовательности Фибоначчи](https://ru.wikipedia.org/wiki/Числа_Фибоначчи) (1,2,3,5,8,…).
Вы можете разбить имеющиеся задачи на более маленькие – например, чтобы распределять между участниками команды не большие куски задания, а маленькие подзадачи. В таком случае не забудьте зафиксировать изменения в issues в репозитории.

**От каждого разработчика ожидается выполнение минимум 40% от общего числа story points в спринте.**
